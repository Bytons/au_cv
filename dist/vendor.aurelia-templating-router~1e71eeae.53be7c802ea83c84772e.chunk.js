(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"aurelia-templating-router":function(e,t,i){"use strict";var n,o,r=i("4ysu"),u=i("3U8n"),a=i("hij8"),l=i("iD3O"),c=i("qrcG"),s=i("lqp5");var p=a.w("<template></template>")(n=function(){})||n,h=Object(u.e)(a.g)(o=function(e){function t(t){var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.compositionEngine=t,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.loadRoute=function(e,t){var i,n,o,u,h,f=e.container.createChild(),d=void 0;null===t.moduleId?d=p:/\.html/i.test(t.moduleId)?(i=t.moduleId,h=/([^\/^\?]+)\.html/i.exec(i)[1],n=Object(a.v)(h),o=Object(a.A)(i),d=n(u=o(u=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}())||u)||u):d=Object(l.d)(t.moduleId,c.a.get(e.container.viewModel.constructor).moduleId);var w={viewModel:d,childContainer:f,view:t.view||t.viewStrategy,router:e};return f.registerSingleton(s.b),f.getChildRouter=function(){var t=void 0;return f.registerHandler(r.c,function(i){return t||(t=e.createChild(f))}),f.get(r.c)},this.compositionEngine.ensureViewModel(w)},t}(r.b))||o;var f,d=i("70NS"),w=i("MP1E").getLogger("route-href"),v=Object(a.u)("route-href")(f=Object(a.s)({name:"route",changeHandler:"processChange",primaryProperty:!0})(f=Object(a.s)({name:"params",changeHandler:"processChange"})(f=Object(a.s)({name:"attribute",defaultValue:"href"})(f=function(){function e(e,t){this.router=e,this.element=t}return e.inject=function(){return[r.c,d.b.Element]},e.prototype.bind=function(){this.isActive=!0,this.processChange()},e.prototype.unbind=function(){this.isActive=!1},e.prototype.attributeChanged=function(e,t){t&&this.element.removeAttribute(t),this.processChange()},e.prototype.processChange=function(){var e=this;return this.router.ensureConfigured().then(function(){if(!e.isActive)return null;var t=e.router.generate(e.route,e.params);return e.element.au.controller?e.element.au.controller.viewModel[e.attribute]=t:e.element.setAttribute(e.attribute,t),null}).catch(function(e){w.error(e)})},e}())||f)||f)||f)||f;function m(e){e.singleton(r.b,h).singleton(r.c,r.a).globalResources(s.a,v),e.container.registerAlias(r.c,r.a)}i.d(t,"configure",function(){return m})},lqp5:function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return m}),i.d(t,"b",function(){return b});var n,o,r,u,a,l,c=i("3U8n"),s=i("X5gX"),p=i("hij8"),h=i("4ysu"),f=i("qrcG"),d=i("70NS");function w(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function v(e,t,i,n,o){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var m=Object(p.v)("router-view")(n=Object(p.x)((o=function(){function t(e,t,i,n,o,c,s){w(this,"swapOrder",r,this),w(this,"layoutView",u,this),w(this,"layoutViewModel",a,this),w(this,"layoutModel",l,this),this.element=e,this.container=t,this.viewSlot=i,this.router=n,this.viewLocator=o,this.compositionTransaction=c,this.compositionEngine=s,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in c||(c.initialComposition=!0,this.compositionTransactionNotifier=c.enlist())}return t.inject=function(){return[d.b.Element,c.a,p.r,h.c,p.p,p.h,p.g]},t.prototype.created=function(e){this.owningView=e},t.prototype.bind=function(e,t){this.container.viewModel=e,this.overrideContext=t},t.prototype.process=function(e,t){var i=this,n=e.component,o=n.childContainer,r=n.viewModel,u=n.viewModelResource,a=u.metadata,l=n.router.currentInstruction.config,c=l.viewPorts&&l.viewPorts[e.name]||{};o.get(b)._notify(this);var s={viewModel:c.layoutViewModel||l.layoutViewModel||this.layoutViewModel,view:c.layoutView||l.layoutView||this.layoutView,model:c.layoutModel||l.layoutModel||this.layoutModel,router:e.component.router,childContainer:o,viewSlot:this.viewSlot},h=this.viewLocator.getViewStrategy(n.view||r);return h&&n.view&&h.makeRelativeTo(f.a.get(n.router.container.viewModel.constructor).moduleId),a.load(o,u.value,null,h,!0).then(function(n){if(i.compositionTransactionNotifier||(i.compositionTransactionOwnershipToken=i.compositionTransaction.tryCapture()),(s.viewModel||s.view)&&(e.layoutInstruction=s),e.controller=a.create(o,p.b.dynamic(i.element,r,n)),t)return null;i.swap(e)})},t.prototype.swap=function(t){var i=this,n=t.layoutInstruction,o=this.view,r=function(){var t=p.k[i.swapOrder]||p.k.after,n=i.viewSlot;t(n,o,function(){return e.resolve(n.add(i.view))}).then(function(){i._notify()})},u=function(e){return t.controller.automate(i.overrideContext,e),i.compositionTransactionOwnershipToken?i.compositionTransactionOwnershipToken.waitForCompositionComplete().then(function(){return i.compositionTransactionOwnershipToken=null,r()}):r()};return n?(n.viewModel||(n.viewModel={}),this.compositionEngine.createController(n).then(function(e){return p.j.distributeView(t.controller.view,e.slots||e.view.slots),e.automate(Object(s.B)(n.viewModel),i.owningView),e.view.children.push(t.controller.view),e.view||e}).then(function(e){return i.view=e,u(e)})):(this.view=t.controller.view,u(this.owningView))},t.prototype._notify=function(){this.compositionTransactionNotifier&&(this.compositionTransactionNotifier.done(),this.compositionTransactionNotifier=null)},t}(),r=v(o.prototype,"swapOrder",[p.s],{enumerable:!0,initializer:null}),u=v(o.prototype,"layoutView",[p.s],{enumerable:!0,initializer:null}),a=v(o.prototype,"layoutViewModel",[p.s],{enumerable:!0,initializer:null}),l=v(o.prototype,"layoutModel",[p.s],{enumerable:!0,initializer:null}),n=o))||n)||n,b=function(){function t(){var t=this;this.promise=new e(function(e){return t.resolve=e})}return t.prototype.findNearest=function(){return this.promise},t.prototype._notify=function(e){this.resolve(e)},t}()}).call(this,i("25Wt"))}}]);
//# sourceMappingURL=vendor.aurelia-templating-router~1e71eeae.53be7c802ea83c84772e.bundle.map